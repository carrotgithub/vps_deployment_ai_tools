model_list:
  # OpenAI 模型配置
  - model_name: gpt-4
    litellm_params:
      model: openai/gpt-4
      api_key: os.environ/OPENAI_API_KEY
      # 可选：设置超时
      timeout: 60
      # 可选：最大重试次数
      max_retries: 3

  - model_name: gpt-4-turbo
    litellm_params:
      model: openai/gpt-4-turbo-preview
      api_key: os.environ/OPENAI_API_KEY

  - model_name: gpt-3.5-turbo
    litellm_params:
      model: openai/gpt-3.5-turbo
      api_key: os.environ/OPENAI_API_KEY

  # Anthropic Claude 模型
  - model_name: claude-3-opus
    litellm_params:
      model: anthropic/claude-3-opus-20240229
      api_key: os.environ/ANTHROPIC_API_KEY

  - model_name: claude-3-sonnet
    litellm_params:
      model: anthropic/claude-3-sonnet-20240229
      api_key: os.environ/ANTHROPIC_API_KEY

  - model_name: claude-3-haiku
    litellm_params:
      model: anthropic/claude-3-haiku-20240307
      api_key: os.environ/ANTHROPIC_API_KEY

  # Google Gemini 模型
  - model_name: gemini-pro
    litellm_params:
      model: gemini/gemini-pro
      api_key: os.environ/GEMINI_API_KEY

  - model_name: gemini-pro-vision
    litellm_params:
      model: gemini/gemini-pro-vision
      api_key: os.environ/GEMINI_API_KEY

  # Azure OpenAI 示例
  - model_name: azure-gpt-4
    litellm_params:
      model: azure/gpt-4
      api_key: os.environ/AZURE_API_KEY
      api_base: os.environ/AZURE_API_BASE
      api_version: os.environ/AZURE_API_VERSION

  # 负载均衡配置示例
  # 为同一个模型配置多个 API 密钥实现负载均衡
  - model_name: gpt-3.5-turbo-loadbalanced
    litellm_params:
      model: openai/gpt-3.5-turbo
      api_key: os.environ/OPENAI_API_KEY_1
      rpm: 500  # 每分钟请求限制

  - model_name: gpt-3.5-turbo-loadbalanced
    litellm_params:
      model: openai/gpt-3.5-turbo
      api_key: os.environ/OPENAI_API_KEY_2
      rpm: 500

# LiteLLM 全局设置
litellm_settings:
  # 详细日志
  set_verbose: true

  # JSON 格式日志
  json_logs: true

  # 启用缓存
  cache: true

  # 缓存参数
  cache_params:
    type: redis
    host: redis
    port: 6379
    password: os.environ/REDIS_PASSWORD
    # 缓存 TTL（秒）
    ttl: 3600

  # 全局速率限制
  rpm: 1000  # 每分钟请求数
  tpm: 100000  # 每分钟 token 数

  # 超时设置（秒）
  request_timeout: 600

  # 启用流式响应
  stream_response: true

  # 成功回调（用于日志记录）
  success_callback: ["langfuse", "prometheus"]

  # 失败回调
  failure_callback: ["langfuse"]

  # 允许的失败次数（故障转移前）
  allowed_fails: 3

  # 模型回退策略
  fallbacks:
    - gpt-4: ["gpt-4-turbo", "claude-3-opus"]
    - claude-3-opus: ["gpt-4", "claude-3-sonnet"]

# 路由器设置（高级负载均衡）
router_settings:
  # 路由策略
  routing_strategy: least-busy  # 可选: simple-shuffle, latency-based, least-busy

  # 启用重试
  num_retries: 3

  # 重试延迟（秒）
  retry_delay: 1

  # 超时设置
  timeout: 60

  # 允许的模型回退
  allowed_fails: 2

# 通用设置
general_settings:
  # 主 API 密钥（如果未设置环境变量）
  # master_key: "your-master-key-here"

  # 数据库配置
  database_url: os.environ/DATABASE_URL

  # 存储模型到数据库
  store_model_in_db: true

  # 启用 Swagger UI 文档
  # 访问 http://localhost:4000/ui
  enable_swagger_ui: true

  # CORS 设置
  allowed_origins:
    - "*"

  # 最大并发请求数
  max_parallel_requests: 100

  # 启用预算管理
  enable_budget_management: true

# 用户管理（可选）
# 创建预定义的虚拟密钥
# virtual_keys:
#   - key_alias: "team-alpha-key"
#     key: "sk-team-alpha-..."
#     models: ["gpt-4", "claude-3-opus"]
#     max_budget: 100.0
#     budget_duration: "30d"
#
#   - key_alias: "team-beta-key"
#     key: "sk-team-beta-..."
#     models: ["gpt-3.5-turbo"]
#     max_budget: 50.0
#     tpm_limit: 50000
#     rpm_limit: 500

# Prometheus 指标设置
prometheus_settings:
  # 启用 Prometheus 指标
  enabled: true

  # 指标端口
  port: 9090

# 日志设置
logging_settings:
  # 日志级别: DEBUG, INFO, WARNING, ERROR
  level: INFO

  # 日志文件路径
  log_file: /app/logs/litellm.log

  # 日志轮转
  rotation: "100 MB"

  # 保留日志数量
  retention: 10

# 环境设置
environment_variables:
  # 自动从系统环境变量加载
  # 支持的环境变量：
  # - OPENAI_API_KEY
  # - ANTHROPIC_API_KEY
  # - GEMINI_API_KEY
  # - AZURE_API_KEY
  # - AZURE_API_BASE
  # - AZURE_API_VERSION
  # - DATABASE_URL
  # - REDIS_HOST
  # - REDIS_PORT
  # - REDIS_PASSWORD
  # - LITELLM_MASTER_KEY

# 注意事项：
# 1. API 密钥应使用环境变量，避免硬编码
# 2. 使用 os.environ/VAR_NAME 从环境变量读取
# 3. 配置文件支持 YAML 格式
# 4. 修改配置后需要重启服务
# 5. 详细配置文档: https://docs.litellm.ai/docs/proxy/configs
